# Shell 编程

## 第一章 Shell 脚本编程概述

##### 1\. Shell 简介

Shell 是一种具备的特殊功能的程序，它提供了用户与内核进行交互操作一种接口，它接受用户输入的命令，并把它送入内核执行。

内核是 Linux 系统的心脏，从开机自检时就驻留在计算机的内存中，直到计算机关闭，而用户的应用程序存储在计算机的硬盘上，仅当需要时才被调入内存。

Shell 是一种应用程序，当用户登录 Linux 系统是，Shell 就会被调入内存执行。Shell 独立于内核，它是链接内核和应用程序的桥梁，并由输入设备读取指令，再将其转换就算及可以理解的机器码，Linux 内核才能执行该命令。

##### 2\. Shell 脚本编程的优势

脚本语言和编译语言的区别？
脚本语言(Script Language) 是相对于编译语言而言的，脚本语言缩短了编译语言编写-编译-链接-执行的这一过程（当然也可以将及其整合为一个文件，然后执行）。脚本语言常常运行于底层，所处理的是字节、整数、浮点数或其他机器层的兑现给，因而脚本语言是低级程序设计语言。脚本语言是解释运行，由解释器（Intepreter）读入脚本程序代码，将其转换执行，而解释器本身则是编译型程序。

**优点和不足：**

语法和结构简单、易学、易用、适合处理文件和目录之类的对象。脚本语言的灵活性是以执行效率为代价，执行效率不如编译型语言。因此脚本语言不适用于大型的项目、计算复杂的工程或由高级需求的应用软件。适合用于系统管理、文本处理等方面完成特定功能的常用的小工具或小程序。

##### 3\. 第一个例子

Shell 脚本可以将一系列的 Linux 命令放在一个文件中。

```shell
#!/bin/bash			#指定解释器
cd ~				#切换到用户的家目录
date				#显示日期
who					#显示当前登录的用户
```

**#!** 

符号称为 “sha-bang”，是 Shell 脚本的起始符号，“#!”  告诉 Linux 系统这个文件的执行需要指定的解释器。`#!`符号之后则是解释器的路径名。常用的解释器：

```shell
对于一般的 Shell 脚本
#!/bin/bash
#!/bin/sh
其他的解释器：sed、awk…
```

**注释**

`#注释内容` 单行注释直到本行结束

Linux 命令由命令名称、选项和参数三部分组成。中间用空格或 Tab 键隔开。

```shell
ls -l /etc/sh* #列出以 sh 为开头文件的详细信息
ls 名称
-l 选项
/etc/sh* 参数
#命令名称在命令中是不可或缺的，而选项和参数可以不出现。
#选项开头符号是一个减号，后面跟一个或多个字母，选项是对命令的补充说明。
#/etc/sh* 中的 * 符号称为通配符
```

##### 4\. 执行 Shell 脚本

```
bash sh文件
sh sh文件
./sh文件
路径/sh文件
```

注意：执行脚本需要用具具备该脚本文件的执行权限





##### 一 Shell 概览

Shell 能做什么

① 自动化批量系统初始化工作（系统更新、软件安装、时区设置、安全测量…）

② 自动化批量软件部署程序 （LAMP/LNMP/LVS/Tomcat/Nginx）

③ 管理应用程序 (KVM、集群管理扩容、MySQL、DELLR720 批量 RAID)

④ 日志分析处理程序（PV,UV,200,!200,top 100,grep/awk）

⑤ 自动化备份恢复程序(MySQL 完全备份/增量备份)

⑥ 自动化管理程序（批量远程修改密码、软件升级、配置更新）

⑦ 自动化信息采集及监控（收集系统/应用状态信息，CPU/Memory/Disk/Net/Apache/MySQL/TCP Staus）

⑧ 配合 Zabbix 信息采集（收集系统/应用状态信息，CPU/Memory/Disk/Net/Apache/MySQL/TCP Staus）

⑨ 自动化扩容（增加云主机--->业务上线）

zabbix 监控 CPU 80% + |- 50% Python API AWS/EC2(增加或删除云主机) + Shell Script 业务上线

⑩ 小游戏

Tips: 可以做任何事，主要取决与业务的需求

##### 二. C Java Python Shell 执行方式对比

1\.

Shell 程序的后缀名 .sh

> linux 命令行返回的变量是 ？
>
> 对返回的变量输出 echo $?