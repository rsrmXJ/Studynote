STM32 

STM32: ARM 结构 32 位

STM32 芯片的分类：

- 超低功耗产品 Ultra-low-power
- 主流型
  - 超值型
  - 基本型
  - USB 基本型
  - 增强型
  - 互联型
- 高性能型

按内部集成的闪存存储容量划分：

- 小容量产品（）
- 中容量
- 大容量
- 互联型

Z 144 引脚

V 100 引脚

R 64 引脚

C 64 引脚

STM32 内核由 ARM 公司设计，而集成的 DMA、Flash、SRAM, AHB 系统总线，FSMC, SDIO,高速外设，低俗外设等由 ST 公司设计

三种可选时钟源：高速内部时钟 HSI（最大 64 MB），高速外部时钟 HSE，锁相环 PLL （最大 72 MB）

STM32F103Rxxx 微控制器 64 引脚，51 引脚是 GPIO, 分为四组：GPIOA,GPIOB,GPIOC,GPIOD，前三组每组 16 个引脚，GPIOD 分配 3 个引脚。

八种 GPIO 模式：

I/O 操作流程：

① 使能 I/O 口时钟：_HAL_RCC_GPIOx_CLK_ENABLE

② 配置 I/O 口输出模式：HAL_GPIO_Init

③ 操作 I/O 口输出数据寄存器，控制 I/O 引脚状态：

优先级分为：抢占优先级和子优先级

优先级分组分为 5 组

GPIO 三种触发中断的模式：上升沿触发 Rising，下降沿触发 Falling，双边沿触发 Both

```c
#incldue "stdio.h"
int fputc(int ch,File *f)
{
    HAL_UART_Trnsmit(&huart1,(uint8_t *)&ch,1,0xFFFF);
    return ch;
}
```

弱导出符

作用：可以防止连接器在解析时找不到函数、变量的定义而报错、有些类似于关键字 extern

定时器：基本定时器、通用定时器、高级控制定时器，特定功能定时器

HAL_GPIO_EXTI_Callback

```
HAL_GPIO_Transmit
```

开漏输出

推挽输出

复用开漏输出

复用推挽输出

-GPIO_MODE_IPU上拉输入

GPIO_MODE_IPD下拉输入

-GPIO_MODE_ING浮空输入

-GPIO_MODE_AIN模拟输入

1\. 时钟极性 CPOL 和时钟相位 CPHA 分别表示什么意思？对于时钟线SCK来说，各有什么含义？
**时钟极性 CPOL** 表示时钟信号在空闲时是高电平还是低电平。

- 当 CPOL=0：SCK 信号线在空闲时为低电平；
- 当 CPOL=1：SCK 信号线在空闲时为高电平；

**时钟相位 CPHA** 表示，用来决定何时进行信号采样，在计数变沿还是偶数变沿，至于是上升沿还是下降沿则取决于 CPOL 时钟极性。

如果 CPHA=1 （偶数边沿）

- CPOL=1，则在SCK时钟的偶数边沿为上升沿时进行数据采样。
- CPOL=0，则在SCK时钟的偶数边沿为下降沿时进行数据采样。

如果 CPHA=0（奇数边沿）

- CPOL=1，则在SCK时钟的奇数边沿为下降沿时进行数据采样。
- CPOL=0，则在SCK时钟的奇数边沿为上升沿时进行数据采样。

2\. RC522 的操作地址为什么需要转换？转换后的最高位代表什么？

因为地址字节要求规定的格式进行传输；第一个字节的第一个位 MSB 设置使用模式，1 为读，0 位写，第 1~6 位定义从设备地址，最后一位设置为0（RFU，这里必须为0，不能使用）。即需要将从设备地址左移一位，且将其低位设置为0例读操作时额外对地址迚行处理，所以写数据得实际操作地址为 `(add<<1)&0x7E`， 读数据得实际操作地址为`((add<<1)&0x7E)|0x80`

转换后的最高位（MSB 位）代表使用的模式。MSB 位为1 时从MFRC522 读出数据；MSB 位为 0 时将数据写入 MFRC522。

3\. RC522 的命令分为哪两类？

① 针对 RC522 的

② 通过 RC522 操作 M1卡的

